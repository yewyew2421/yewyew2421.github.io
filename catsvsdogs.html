<head>
  <h1> Is it a cat or a dog? </h1>
  <input id="photo" type="file">
  <div id="preview"></div>
  <div id="results"></div>
</head>
<body>
  <script type="module">
    import { Client } from "https://cdn.jsdelivr.net/npm/@gradio/client/dist/index.min.js";

    // Connect to your Hugging Face Space
    const client = await Client.connect("yewyew242/fastai_demo");

    async function please(event) {
      const file = event.target.files[0];
      if (!file) return;

      // Show image preview
      const preview = document.getElementById("preview");
      preview.innerHTML = ""; // clear old preview
      const img = document.createElement("img");
      img.src = URL.createObjectURL(file);
      img.style.maxWidth = "300px";
      img.style.display = "block";
      img.style.marginTop = "10px";
      preview.appendChild(img);

      // Call the Space
      const result = await client.predict("/predict", [file]);
      console.log(result.data);

      // Expecting result.data[0] to be {label, confidence}
      const output = result.data[0];
      const outputText = `Prediction: ${output.label}`;

      // Show result
      document.getElementById("results").innerText = outputText;
    }

    document.getElementById("photo").addEventListener("change", please);
  </script>
</body>
